// Package oapi provides primitives to interact with the openapi HTTP API.
//
// Code generated by github.com/oapi-codegen/oapi-codegen/v2 version v2.4.1 DO NOT EDIT.
package oapi

import (
	"bytes"
	"compress/gzip"
	"encoding/base64"
	"fmt"
	"net/url"
	"path"
	"strings"

	"github.com/getkin/kin-openapi/openapi3"
)

// Base64 encoded, gzipped, json marshaled Swagger object
var swaggerSpec = []string{

	"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",
	"//8Y7SC1/zcAAA==",
}

// GetSwagger returns the content of the embedded swagger specification file
// or error if failed to decode
func decodeSpec() ([]byte, error) {
	zipped, err := base64.StdEncoding.DecodeString(strings.Join(swaggerSpec, ""))
	if err != nil {
		return nil, fmt.Errorf("error base64 decoding spec: %w", err)
	}
	zr, err := gzip.NewReader(bytes.NewReader(zipped))
	if err != nil {
		return nil, fmt.Errorf("error decompressing spec: %w", err)
	}
	var buf bytes.Buffer
	_, err = buf.ReadFrom(zr)
	if err != nil {
		return nil, fmt.Errorf("error decompressing spec: %w", err)
	}

	return buf.Bytes(), nil
}

var rawSpec = decodeSpecCached()

// a naive cached of a decoded swagger spec
func decodeSpecCached() func() ([]byte, error) {
	data, err := decodeSpec()
	return func() ([]byte, error) {
		return data, err
	}
}

// Constructs a synthetic filesystem for resolving external references when loading openapi specifications.
func PathToRawSpec(pathToFile string) map[string]func() ([]byte, error) {
	res := make(map[string]func() ([]byte, error))
	if len(pathToFile) > 0 {
		res[pathToFile] = rawSpec
	}

	return res
}

// GetSwagger returns the Swagger specification corresponding to the generated code
// in this file. The external references of Swagger specification are resolved.
// The logic of resolving external references is tightly connected to "import-mapping" feature.
// Externally referenced files must be embedded in the corresponding golang packages.
// Urls can be supported but this task was out of the scope.
func GetSwagger() (swagger *openapi3.T, err error) {
	resolvePath := PathToRawSpec("")

	loader := openapi3.NewLoader()
	loader.IsExternalRefsAllowed = true
	loader.ReadFromURIFunc = func(loader *openapi3.Loader, url *url.URL) ([]byte, error) {
		pathToFile := url.String()
		pathToFile = path.Clean(pathToFile)
		getSpec, ok := resolvePath[pathToFile]
		if !ok {
			err1 := fmt.Errorf("path not found: %s", pathToFile)
			return nil, err1
		}
		return getSpec()
	}
	var specData []byte
	specData, err = rawSpec()
	if err != nil {
		return
	}
	swagger, err = loader.LoadFromData(specData)
	if err != nil {
		return
	}
	return
}

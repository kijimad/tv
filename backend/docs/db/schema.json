{
  "name": "tv",
  "tables": [
    {
      "name": "public.sessions",
      "type": "BASE TABLE",
      "comment": "録画セッション情報",
      "columns": [
        {
          "name": "created_at",
          "type": "timestamp without time zone",
          "nullable": false,
          "default": "now()"
        },
        {
          "name": "filename",
          "type": "varchar(255)",
          "nullable": false,
          "comment": "ファイル名"
        },
        {
          "name": "finished_at",
          "type": "timestamp without time zone",
          "nullable": true,
          "comment": "録画終了日時"
        },
        {
          "name": "id",
          "type": "bigint",
          "nullable": false,
          "default": "nextval('sessions_id_seq'::regclass)"
        },
        {
          "name": "started_at",
          "type": "timestamp without time zone",
          "nullable": false,
          "default": "now()",
          "comment": "録画開始日時"
        },
        {
          "name": "status",
          "type": "varchar(20)",
          "nullable": false,
          "default": "'recording'::character varying",
          "comment": "セッション状態（recording, completed, failed）"
        },
        {
          "name": "title",
          "type": "varchar(255)",
          "nullable": false,
          "comment": "セッションタイトル"
        },
        {
          "name": "updated_at",
          "type": "timestamp without time zone",
          "nullable": false,
          "default": "now()"
        }
      ],
      "indexes": [
        {
          "name": "sessions_filename_key",
          "def": "CREATE UNIQUE INDEX sessions_filename_key ON public.sessions USING btree (filename)",
          "table": "public.sessions",
          "columns": [
            "filename"
          ]
        },
        {
          "name": "sessions_pkey",
          "def": "CREATE UNIQUE INDEX sessions_pkey ON public.sessions USING btree (id)",
          "table": "public.sessions",
          "columns": [
            "id"
          ]
        }
      ],
      "constraints": [
        {
          "name": "sessions_created_at_not_null",
          "type": "n",
          "def": "NOT NULL created_at",
          "table": "public.sessions",
          "referenced_table": "",
          "columns": [
            "created_at"
          ]
        },
        {
          "name": "sessions_filename_key",
          "type": "UNIQUE",
          "def": "UNIQUE (filename)",
          "table": "public.sessions",
          "referenced_table": "",
          "columns": [
            "filename"
          ]
        },
        {
          "name": "sessions_filename_not_null",
          "type": "n",
          "def": "NOT NULL filename",
          "table": "public.sessions",
          "referenced_table": "",
          "columns": [
            "filename"
          ]
        },
        {
          "name": "sessions_id_not_null",
          "type": "n",
          "def": "NOT NULL id",
          "table": "public.sessions",
          "referenced_table": "",
          "columns": [
            "id"
          ]
        },
        {
          "name": "sessions_pkey",
          "type": "PRIMARY KEY",
          "def": "PRIMARY KEY (id)",
          "table": "public.sessions",
          "referenced_table": "",
          "columns": [
            "id"
          ]
        },
        {
          "name": "sessions_started_at_not_null",
          "type": "n",
          "def": "NOT NULL started_at",
          "table": "public.sessions",
          "referenced_table": "",
          "columns": [
            "started_at"
          ]
        },
        {
          "name": "sessions_status_not_null",
          "type": "n",
          "def": "NOT NULL status",
          "table": "public.sessions",
          "referenced_table": "",
          "columns": [
            "status"
          ]
        },
        {
          "name": "sessions_title_not_null",
          "type": "n",
          "def": "NOT NULL title",
          "table": "public.sessions",
          "referenced_table": "",
          "columns": [
            "title"
          ]
        },
        {
          "name": "sessions_updated_at_not_null",
          "type": "n",
          "def": "NOT NULL updated_at",
          "table": "public.sessions",
          "referenced_table": "",
          "columns": [
            "updated_at"
          ]
        }
      ]
    },
    {
      "name": "public.video_sessions",
      "type": "BASE TABLE",
      "comment": "動画とセッションの関連付け",
      "columns": [
        {
          "name": "created_at",
          "type": "timestamp without time zone",
          "nullable": false,
          "default": "now()"
        },
        {
          "name": "id",
          "type": "bigint",
          "nullable": false,
          "default": "nextval('video_sessions_id_seq'::regclass)"
        },
        {
          "name": "session_id",
          "type": "bigint",
          "nullable": false,
          "comment": "セッションID"
        },
        {
          "name": "updated_at",
          "type": "timestamp without time zone",
          "nullable": false,
          "default": "now()"
        },
        {
          "name": "video_id",
          "type": "bigint",
          "nullable": false,
          "comment": "動画ID"
        }
      ],
      "indexes": [
        {
          "name": "idx_video_sessions_session_id",
          "def": "CREATE INDEX idx_video_sessions_session_id ON public.video_sessions USING btree (session_id)",
          "table": "public.video_sessions",
          "columns": [
            "session_id"
          ]
        },
        {
          "name": "idx_video_sessions_video_id",
          "def": "CREATE INDEX idx_video_sessions_video_id ON public.video_sessions USING btree (video_id)",
          "table": "public.video_sessions",
          "columns": [
            "video_id"
          ]
        },
        {
          "name": "video_sessions_pkey",
          "def": "CREATE UNIQUE INDEX video_sessions_pkey ON public.video_sessions USING btree (id)",
          "table": "public.video_sessions",
          "columns": [
            "id"
          ]
        },
        {
          "name": "video_sessions_video_id_session_id_key",
          "def": "CREATE UNIQUE INDEX video_sessions_video_id_session_id_key ON public.video_sessions USING btree (video_id, session_id)",
          "table": "public.video_sessions",
          "columns": [
            "video_id",
            "session_id"
          ]
        }
      ],
      "constraints": [
        {
          "name": "video_sessions_created_at_not_null",
          "type": "n",
          "def": "NOT NULL created_at",
          "table": "public.video_sessions",
          "referenced_table": "",
          "columns": [
            "created_at"
          ]
        },
        {
          "name": "video_sessions_id_not_null",
          "type": "n",
          "def": "NOT NULL id",
          "table": "public.video_sessions",
          "referenced_table": "",
          "columns": [
            "id"
          ]
        },
        {
          "name": "video_sessions_pkey",
          "type": "PRIMARY KEY",
          "def": "PRIMARY KEY (id)",
          "table": "public.video_sessions",
          "referenced_table": "",
          "columns": [
            "id"
          ]
        },
        {
          "name": "video_sessions_session_id_fkey",
          "type": "FOREIGN KEY",
          "def": "FOREIGN KEY (session_id) REFERENCES sessions(id) ON DELETE CASCADE",
          "table": "public.video_sessions",
          "referenced_table": "sessions",
          "columns": [
            "session_id"
          ],
          "referenced_columns": [
            "id"
          ]
        },
        {
          "name": "video_sessions_session_id_not_null",
          "type": "n",
          "def": "NOT NULL session_id",
          "table": "public.video_sessions",
          "referenced_table": "",
          "columns": [
            "session_id"
          ]
        },
        {
          "name": "video_sessions_updated_at_not_null",
          "type": "n",
          "def": "NOT NULL updated_at",
          "table": "public.video_sessions",
          "referenced_table": "",
          "columns": [
            "updated_at"
          ]
        },
        {
          "name": "video_sessions_video_id_fkey",
          "type": "FOREIGN KEY",
          "def": "FOREIGN KEY (video_id) REFERENCES videos(id) ON DELETE CASCADE",
          "table": "public.video_sessions",
          "referenced_table": "videos",
          "columns": [
            "video_id"
          ],
          "referenced_columns": [
            "id"
          ]
        },
        {
          "name": "video_sessions_video_id_not_null",
          "type": "n",
          "def": "NOT NULL video_id",
          "table": "public.video_sessions",
          "referenced_table": "",
          "columns": [
            "video_id"
          ]
        },
        {
          "name": "video_sessions_video_id_session_id_key",
          "type": "UNIQUE",
          "def": "UNIQUE (video_id, session_id)",
          "table": "public.video_sessions",
          "referenced_table": "",
          "columns": [
            "video_id",
            "session_id"
          ]
        }
      ]
    },
    {
      "name": "public.videos",
      "type": "BASE TABLE",
      "comment": "動画情報",
      "columns": [
        {
          "name": "created_at",
          "type": "timestamp without time zone",
          "nullable": false,
          "default": "CURRENT_TIMESTAMP"
        },
        {
          "name": "filename",
          "type": "text",
          "nullable": false,
          "comment": "ファイル名"
        },
        {
          "name": "finished_at",
          "type": "timestamp without time zone",
          "nullable": false,
          "comment": "録画終了日時"
        },
        {
          "name": "id",
          "type": "bigint",
          "nullable": false,
          "default": "nextval('videos_id_seq'::regclass)"
        },
        {
          "name": "started_at",
          "type": "timestamp without time zone",
          "nullable": false,
          "comment": "録画開始日時"
        },
        {
          "name": "title",
          "type": "text",
          "nullable": false,
          "comment": "動画タイトル"
        },
        {
          "name": "updated_at",
          "type": "timestamp without time zone",
          "nullable": false,
          "default": "CURRENT_TIMESTAMP"
        }
      ],
      "indexes": [
        {
          "name": "videos_filename_key",
          "def": "CREATE UNIQUE INDEX videos_filename_key ON public.videos USING btree (filename)",
          "table": "public.videos",
          "columns": [
            "filename"
          ]
        },
        {
          "name": "videos_pkey",
          "def": "CREATE UNIQUE INDEX videos_pkey ON public.videos USING btree (id)",
          "table": "public.videos",
          "columns": [
            "id"
          ]
        }
      ],
      "constraints": [
        {
          "name": "videos_created_at_not_null",
          "type": "n",
          "def": "NOT NULL created_at",
          "table": "public.videos",
          "referenced_table": "",
          "columns": [
            "created_at"
          ]
        },
        {
          "name": "videos_filename_key",
          "type": "UNIQUE",
          "def": "UNIQUE (filename)",
          "table": "public.videos",
          "referenced_table": "",
          "columns": [
            "filename"
          ]
        },
        {
          "name": "videos_filename_not_null",
          "type": "n",
          "def": "NOT NULL filename",
          "table": "public.videos",
          "referenced_table": "",
          "columns": [
            "filename"
          ]
        },
        {
          "name": "videos_finished_at_not_null",
          "type": "n",
          "def": "NOT NULL finished_at",
          "table": "public.videos",
          "referenced_table": "",
          "columns": [
            "finished_at"
          ]
        },
        {
          "name": "videos_id_not_null",
          "type": "n",
          "def": "NOT NULL id",
          "table": "public.videos",
          "referenced_table": "",
          "columns": [
            "id"
          ]
        },
        {
          "name": "videos_pkey",
          "type": "PRIMARY KEY",
          "def": "PRIMARY KEY (id)",
          "table": "public.videos",
          "referenced_table": "",
          "columns": [
            "id"
          ]
        },
        {
          "name": "videos_started_at_not_null",
          "type": "n",
          "def": "NOT NULL started_at",
          "table": "public.videos",
          "referenced_table": "",
          "columns": [
            "started_at"
          ]
        },
        {
          "name": "videos_title_not_null",
          "type": "n",
          "def": "NOT NULL title",
          "table": "public.videos",
          "referenced_table": "",
          "columns": [
            "title"
          ]
        },
        {
          "name": "videos_updated_at_not_null",
          "type": "n",
          "def": "NOT NULL updated_at",
          "table": "public.videos",
          "referenced_table": "",
          "columns": [
            "updated_at"
          ]
        }
      ]
    }
  ],
  "relations": [
    {
      "table": "public.video_sessions",
      "columns": [
        "video_id"
      ],
      "cardinality": "zero_or_more",
      "parent_table": "public.videos",
      "parent_columns": [
        "id"
      ],
      "parent_cardinality": "exactly_one",
      "def": "FOREIGN KEY (video_id) REFERENCES videos(id) ON DELETE CASCADE"
    },
    {
      "table": "public.video_sessions",
      "columns": [
        "session_id"
      ],
      "cardinality": "zero_or_more",
      "parent_table": "public.sessions",
      "parent_columns": [
        "id"
      ],
      "parent_cardinality": "exactly_one",
      "def": "FOREIGN KEY (session_id) REFERENCES sessions(id) ON DELETE CASCADE"
    }
  ],
  "driver": {
    "name": "postgres",
    "database_version": "PostgreSQL 18.1 (Debian 18.1-1.pgdg13+2) on x86_64-pc-linux-gnu, compiled by gcc (Debian 14.2.0-19) 14.2.0, 64-bit",
    "meta": {
      "current_schema": "public",
      "search_paths": [
        "root",
        "public"
      ],
      "dict": {
        "Functions": "Stored procedures and functions"
      }
    }
  }
}
